angular.module("linkmanApp",["ngAnimate","ui.router","firebase","cfp.hotkeys"]).constant("FBURL","https://linkman.firebaseio.com/links").factory("fbService",["$firebaseArray","FBURL",function($firebaseArray,FBURL){var ref=new Firebase(FBURL);return $firebaseArray(ref)}]).service("hotkey",["hotkeys","$state",function(hotkeys,$state){this.run=function($scope){hotkeys.bindTo($scope).add({combo:"esc",callback:function(){$state.go("links")}}).add({combo:"ctrl+n",callback:function(){$state.go("links.add")}}).add({combo:"n",callback:function(){$state.go("links.add")}})}}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$stateProvider.state("links",{url:"/links",templateUrl:"views/link-list.html",controller:"ListController"}).state("links.add",{url:"/add",templateUrl:"views/link-add.html",controller:"AddLinkController"}).state("links.edit",{url:"/:id",templateUrl:"views/link-edit.html",controller:"EditController"}),$urlRouterProvider.otherwise("/links"),$locationProvider.html5Mode(!0)}]).controller("AppController",["$scope","fbService","$state","hotkey",function($scope,fbService,$state,hotkey){$scope.showpreloader=!0,$scope.openAddLink=function(){$state.go("links.add")},$scope.openEditLink=function(){$state.go("links.edit")},$scope.reset=function(){fbService.$remove()},hotkey.run($scope)}]).controller("ListController",["$scope","fbService",function($scope,fbService){$scope.links=fbService,$scope.$parent.showpreloader=!1}]).controller("AddLinkController",["$scope","fbService","$state",function($scope,fbService,$state){$scope.submit=function(){fbService.$add({title:$scope.title,url:$scope.url,tags:$scope.tags}).then(function(){})},$scope.cancel=function(){$state.go("links")}}]).controller("EditController",["$scope","fbService","$state","$stateParams",function($scope,fbService,$state,$stateParams){$scope.master=$scope.links[$stateParams.id],$scope.link=angular.copy($scope.master),$scope.save=function(){angular.copy($scope.link,$scope.master),fbService.$save($scope.master).then(function(){$state.go("links")})},$scope.cancel=function(){$state.go("links")}}]);